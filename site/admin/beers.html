<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>
    <body>
        <div id="beers" class="container">
        </div>
        <script type="text/javascript">
            (async () => {
                const elem = document.getElementById('beers');
                const data = await fetch('/v1/beerbods.json')
                    .then(response => response.json());
                var output = "";
                for (const week of [...data.previous.reverse(), ...data.current]) {
                    for (const beer of week.beers) {
                        var textClass = '';
                        if (!beer.untappd.lookupSuccessful) {
                            textClass = 'text-danger';
                        }
                        output += `<div class="row"><h1 class="${textClass}">${week.pretext}`;
                        if (!beer.untappd.lookupSuccessful) {
                            output += 'ðŸ¤·';
                        }
                        output += `<a href="${beer.beerbodsUrl}">${beer.name}</a> - ${beer.brewery.name}`;
                        if (!beer.untappd.lookupSuccessful) {
                            output += 'ðŸ¤·';
                        }
                        output += `</h1><h2><a href="${beer.untappd.searchUrl}">${beer.untappd.searchTerm.toLowerCase()}</a></h2></div>`;
                    }
                }
                elem.innerHTML = output;
            })()
        </script>
    </body>
</html>
